{"ast":null,"code":"const axios = require('axios');\n\nconst url = require('url');\n\nconst path = require('path');\n\nexport default function handler(req, res) {\n  const body = req.body;\n  console.log({\n    body\n  });\n  const shopifyPath = req.url.replace('api/shopify/', ''); // const query = req.query;\n\n  const shopifyUrl = `https://rens-disposable.myshopify.com`;\n  const accessToken = req.cookies.accessToken;\n  const requestUrl = new url.URL(path.join('/admin/api/2020-07', shopifyPath), shopifyUrl).href;\n  axios({\n    url: requestUrl,\n    method: req.method,\n    data: req.body,\n    headers: {\n      'X-Shopify-Access-Token': accessToken\n    }\n  }).then(({\n    data\n  }) => {\n    res.status(200).json(data);\n  }).catch(error => {\n    res.status(400).send(error);\n  });\n}","map":{"version":3,"sources":["/Users/sonchu/Projects/upsell-metropolia/pages/api/shopify/[...slug].js"],"names":["axios","require","url","path","handler","req","res","body","console","log","shopifyPath","replace","shopifyUrl","accessToken","cookies","requestUrl","URL","join","href","method","data","headers","then","status","json","catch","error","send"],"mappings":"AAAA,MAAMA,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;AACA,MAAMC,GAAG,GAAGD,OAAO,CAAC,KAAD,CAAnB;;AACA,MAAME,IAAI,GAAGF,OAAO,CAAC,MAAD,CAApB;;AAEA,eAAe,SAASG,OAAT,CAAiBC,GAAjB,EAAsBC,GAAtB,EAA2B;AACxC,QAAMC,IAAI,GAAGF,GAAG,CAACE,IAAjB;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAY;AAACF,IAAAA;AAAD,GAAZ;AAEA,QAAMG,WAAW,GAAGL,GAAG,CAACH,GAAJ,CAAQS,OAAR,CAAgB,cAAhB,EAAgC,EAAhC,CAApB,CAJwC,CAKxC;;AAEA,QAAMC,UAAU,GAAI,uCAApB;AAEA,QAAMC,WAAW,GAAGR,GAAG,CAACS,OAAJ,CAAYD,WAAhC;AACA,QAAME,UAAU,GAAI,IAAIb,GAAG,CAACc,GAAR,CAAYb,IAAI,CAACc,IAAL,CAAU,oBAAV,EAAgCP,WAAhC,CAAZ,EAA0DE,UAA1D,CAAD,CAAwEM,IAA3F;AAEAlB,EAAAA,KAAK,CAAC;AACJE,IAAAA,GAAG,EAAEa,UADD;AAEJI,IAAAA,MAAM,EAAEd,GAAG,CAACc,MAFR;AAGJC,IAAAA,IAAI,EAAEf,GAAG,CAACE,IAHN;AAIJc,IAAAA,OAAO,EAAE;AACP,gCAA0BR;AADnB;AAJL,GAAD,CAAL,CAOGS,IAPH,CAOQ,CAAC;AAAEF,IAAAA;AAAF,GAAD,KAAc;AACpBd,IAAAA,GAAG,CAACiB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBJ,IAArB;AACD,GATD,EASGK,KATH,CASUC,KAAD,IAAW;AAClBpB,IAAAA,GAAG,CAACiB,MAAJ,CAAW,GAAX,EAAgBI,IAAhB,CAAqBD,KAArB;AACD,GAXD;AAYD","sourcesContent":["const axios = require('axios');\nconst url = require('url');\nconst path = require('path');\n\nexport default function handler(req, res) {\n  const body = req.body;\n  console.log({body});\n\n  const shopifyPath = req.url.replace('api/shopify/', '');\n  // const query = req.query;\n\n  const shopifyUrl = `https://rens-disposable.myshopify.com`;\n\n  const accessToken = req.cookies.accessToken;\n  const requestUrl = (new url.URL(path.join('/admin/api/2020-07', shopifyPath), shopifyUrl)).href;\n\n  axios({\n    url: requestUrl,\n    method: req.method,\n    data: req.body,\n    headers: {\n      'X-Shopify-Access-Token': accessToken\n    }\n  }).then(({ data }) => {\n    res.status(200).json(data)\n  }).catch((error) => {\n    res.status(400).send(error)\n  })\n}"]},"metadata":{},"sourceType":"module"}